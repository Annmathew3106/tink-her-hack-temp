<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lost & Found - Campus Portal</title>
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" href="lost.css">
</head>
<body>

<div class="layout">

    <!-- Sidebar -->
    <div class="sidebar">
        <h2 class="logo">CampusConnect</h2>

        <ul class="nav-links">
            <li><a href="home.html">Dashboard</a></li>
            <li><a href="lost.html" class="active">Lost & Found</a></li>
            <li><a href="#">Notices & Announcements</a></li>
            <li><a href="#">Doubts</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <h1>Lost & Found</h1>
        <div class="lost-found-wrapper">
            <div class="lost-found-main">
                <div class="lost-found-container">
                    <section id="report">
                        <h2>Report an Item</h2>
                        <form id="itemForm">
                            <label>Type:
                                <select name="type" required>
                                    <option value="Lost">Lost</option>
                                    <option value="Found">Found</option>
                                </select>
                            </label>
                            <label>Description:
                                <input type="text" name="description" required placeholder="e.g. blue backpack">
                            </label>
                            <label>Location:
                                <input type="text" name="location" required placeholder="Where it was lost/found">
                            </label>
                            <label>Image (optional):
                                <input type="file" name="image" accept="image/*">
                            </label>
                            <button type="submit">Submit Report</button>
                        </form>
                    </section>

                    <section id="search">
                        <h2>Search Records</h2>
                        <input type="text" id="searchInput" placeholder="Search by keyword...">
                        <div style="margin-top:10px;">
                            <button onclick="filterType('All')">All</button>
                            <button onclick="filterType('Lost')">Lost</button>
                            <button onclick="filterType('Found')">Found</button>
                        </div>
                    </section>

                    <section id="itemsList">
                        <h2>Records</h2>
                        <table>
                            <thead>
                                <tr><th>Type</th><th>Description</th><th>Location</th><th>Image</th></tr>
                            </thead>
                            <tbody id="tableBody">
                                <!-- rows inserted by script -->
                            </tbody>
                        </table>
                    </section>
                </div>
            </div>
            <aside class="lost-found-sidebar">
                <div class="sidebar-illustration">
                    <!-- placeholder image, replace with campus graphic if available -->
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cmVjdCB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgZmlsbD0iI2Y0ZjZmOSIgcng9IjE2Ii8+CiAgICA8dGV4dCB4PSI3NSIgeT0iNzUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzM0MzU1ZiI+TG9zdCAmIzhlOyBGb3VuZDwvdGV4dD4KPC9zdmc+" alt="lost and found illustration">
                </div>
                <div class="sidebar-stats">
                    <h2>Stats</h2>
                    <p>Total reports: <span id="statTotal">0</span></p>
                    <p>Lost: <span id="statLost">0</span></p>
                    <p>Found: <span id="statFound">0</span></p>
                </div>
                <h2>Tips & Notices</h2>
                <ul>
                    <li>Include clear descriptions and photos when possible.</li>
                    <li>Check here frequently for updates.</li>
                    <li>Contact campus security for urgent items.</li>
                </ul>
            </aside>
        </div>
    </div>

</div>

<script>
// simple in-memory store
const records = [];

function renderTable(filter='All', keyword='') {
    const body = document.getElementById('tableBody');
    body.innerHTML = '';
    records.forEach(r => {
        if ((filter === 'All' || r.type === filter) &&
            (keyword === '' || r.description.toLowerCase().includes(keyword.toLowerCase()) || r.location.toLowerCase().includes(keyword.toLowerCase()))) {
            const tr = document.createElement('tr');
            const imgCell = r.image ? `<td><img src="${r.image}" width="50"></td>` : '<td></td>';
            tr.innerHTML = `<td>${r.type}</td><td>${r.description}</td><td>${r.location}</td>${imgCell}`;
            body.appendChild(tr);
        }
    });
}

function filterType(type) {
    const kw = document.getElementById('searchInput').value;
    renderTable(type, kw);
}

document.getElementById('searchInput').addEventListener('input', e => {
    const kw = e.target.value;
    renderTable('All', kw);
});

// form submission
const form = document.getElementById('itemForm');
form.addEventListener('submit', e => {
    e.preventDefault();
    const data = new FormData(form);
    const fileInput = form.querySelector('input[name="image"]');
    const entry = {
        type: data.get('type'),
        description: data.get('description'),
        location: data.get('location'),
        image: null
    };
    if (fileInput && fileInput.files && fileInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            entry.image = e.target.result;
            records.push(entry);
            form.reset();
            renderTable();
        };
        reader.readAsDataURL(fileInput.files[0]);
    } else {
        records.push(entry);
        form.reset();
        renderTable();
    }
});

// helper to update sidebar stats
function updateStats() {
    const total = records.length;
    const lostCount = records.filter(r=>r.type==='Lost').length;
    const foundCount = records.filter(r=>r.type==='Found').length;
    document.getElementById('statTotal').textContent = total;
    document.getElementById('statLost').textContent = lostCount;
    document.getElementById('statFound').textContent = foundCount;
}

// prepopulate with sample items
records.push({type:'Lost',description:'Blue umbrella',location:'Library'});
records.push({type:'Found',description:'Set of keys',location:'Cafeteria'});
renderTable();
updateStats();

// modify renderTable to update stats each time
const originalRender = renderTable;
renderTable = function(filter='All', keyword='') {
    originalRender(filter, keyword);
    updateStats();
};
</script>

</body>
</html>
